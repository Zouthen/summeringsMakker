@model CaseSummary

<h2>Document Analysis Results</h2>

<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
</script>

<div>
    <h3>Summary</h3>
    <p>@Model.Summary</p>

    <h3>Word Frequencies</h3>
    <ul>
        @foreach (var word in Model.Words)
        {
            <li>@word.Words - @word.Frequency times</li>
        }
    </ul>

    <h3>Mermaid Diagram</h3>
    <p>@Model.MermaidCode</p>
    <div class="mermaid">
        @{
            var mermaidDiagram = Model.MermaidCode.Replace("```mermaid", "").Trim(); 
        }
        @Html.Raw(mermaidDiagram + "]")
    </div>
    <div class="mermaid">
        @{
            var mermaidDiagram2 = Model.MermaidCode.Replace("```mermaid", "").Trim();
        }
    </div>

    <h3>Legal References</h3>
    <ul>
        @foreach (var reference in Model.LegalReferences)
        {
            <li>@reference</li>
        }
    </ul>
</div>